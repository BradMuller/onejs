#!/usr/bin/env node

var one = require('../lib/one'),
    opts = require('opts'),
    puts = require('sys').puts,
    options,
    REV;

REV = '1.0.0';

opts.parse([{
    'short':'v',
    'long':'version',
    'description':'Show version and exit',
    'callback':version
  }
]);

function run(){
  var args = opts.args();
  args.length == 0 && args.push('./');

  one.build(args[0], function(error, sc){
    if(error) throw error;
    puts(sc);
  });
}

function version(){
  puts(REV);
  process.exit(0);
}

run();
